{"version":3,"sources":["uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","components/topic-list-item/topic-list-item.uvue","components/article-list-item/article-list-item.uvue","common/socket.uts"],"sourcesContent":["<template>\r\n\t<view v-if=\"shown\" class=\"mask flex-center\">\r\n\t\t<view class=\"content\">\r\n\t\t\t\r\n\t\t\t<view class=\"content-top\">\r\n\t\t\t\t<text class=\"content-top-text\">{{title}}</text>\r\n\t\t\t\t<image class=\"content-top-image\" mode=\"widthFix\"\r\n\t\t\t\t\tsrc=\"/uni_modules/uni-upgrade-center-app/static/bg_top.png\"></image>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"content-body\">\r\n\t\t\t\t<view class=\"content-body-title\">\r\n\t\t\t\t\t<text class=\"text title\">{{subTitle}}</text>\r\n\t\t\t\t\t<text class=\"text version\">v{{version}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"body\">\r\n\t\t\t\t\t<scroll-view class=\"box-des-scroll\" scroll-y=\"true\">\r\n\t\t\t\t\t\t<text class=\"text box-des\">\r\n\t\t\t\t\t\t\t{{contents}}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer flex-center\">\r\n\t\t\t\t\t<template v-if=\"isiOS\">\r\n\t\t\t\t\t\tuni-app x 暂不支持 iOS\r\n\t\t\t\t\t\t<!-- <button class=\"content-button\" style=\"border: none;color: #fff;\" plain @click=\"jumpToAppStore\">\r\n\t\t\t\t\t\t\t{{downLoadBtnTextiOS}}\r\n\t\t\t\t\t\t</button> -->\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<template v-if=\"!downloadSuccess\">\r\n\t\t\t\t\t\t\t<view class=\"progress-box flex-column\" v-if=\"downloading\">\r\n\t\t\t\t\t\t\t\t<progress class=\"progress\" :percent=\"downLoadPercent\" activeColor=\"#3DA7FF\"\r\n\t\t\t\t\t\t\t\t\t:show-info=\"true\" :stroke-width=\"10\" />\r\n\t\t\t\t\t\t\t\t<view style=\"width:100%;justify-content: space-around;flex-direction: row;\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text\" style=\"font-size: 14px;\">{{downLoadingText}}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 14px;\">({{downloadedSize}}/{{packageFileSize}}M)</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<button v-else class=\"content-button\" @click=\"updateApp\">\r\n\t\t\t\t\t\t\t\t{{downLoadBtnText}}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</template>\r\n\r\n\t\t\t\t\t\t<button v-else-if=\"downloadSuccess && !installed\" class=\"content-button\" :loading=\"installing\"\r\n\t\t\t\t\t\t\t:disabled=\"installing\" @click=\"installPackage\">\r\n\t\t\t\t\t\t\t{{installing ? '正在安装……' : '下载完成，立即安装'}}\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<button v-else-if=\"installed\" class=\"content-button\" @click=\"installPackage\">\r\n\t\t\t\t\t\t\t安装未完成，点击安装\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"content-bottom\">\r\n\t\t\t\t<image v-if=\"!is_mandatory\" class=\"close-img\" mode=\"widthFix\"\r\n\t\t\t\t\tsrc=\"/uni_modules/uni-upgrade-center-app/static/app_update_close.png\" @click=\"closeUpdate\">\r\n\t\t\t\t</image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { createNotificationProgress, cancelNotificationProgress, finishNotificationProgress } from '@/uni_modules/uts-progressNotification'\r\n\timport { type CreateNotificationProgressOptions, type FinishNotificationProgressOptions } from '@/uni_modules/uts-progressNotification/utssdk/interface'\r\n\timport { UniUpgradeCenterResult, StoreListItem } from '../../utils/call-check-version'\r\n\timport { openSchema } from '../../utils/utils'\r\n\r\n\tconst platform_iOS = 'iOS';\r\n\tconst platform_Android = 'Android';\r\n\tconst requiredKey = ['version', 'url', 'type']\r\n\tlet downloadTask : DownloadTask | null = null;\r\n\tlet openSchemePromise : Promise<boolean> | null = null;\r\n\r\n\texport default {\r\n\t\temits: ['close', 'show'],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshown: false,\r\n\t\t\t\t// 从之前下载安装\r\n\t\t\t\tinstallForBeforeFilePath: '',\r\n\r\n\t\t\t\t// 安装\r\n\t\t\t\tinstalled: false,\r\n\t\t\t\tinstalling: false,\r\n\r\n\t\t\t\t// 下载\r\n\t\t\t\tdownloadSuccess: false,\r\n\t\t\t\tdownloading: false,\r\n\r\n\t\t\t\tdownLoadPercent: 0,\r\n\t\t\t\tdownloadedSize: 0,\r\n\t\t\t\tpackageFileSize: 0,\r\n\r\n\t\t\t\ttempFilePath: '', // 要安装的本地包地址\r\n\r\n\t\t\t\t// 默认安装包信息\r\n\t\t\t\ttitle: '更新日志',\r\n\t\t\t\tcontents: '',\r\n\t\t\t\tversion: '',\r\n\t\t\t\tis_mandatory: false,\r\n\t\t\t\turl: \"\",\r\n\t\t\t\tplatform: [] as string[],\r\n\t\t\t\tstore_list: null as StoreListItem[] | null,\r\n\r\n\t\t\t\t// 可自定义属性\r\n\t\t\t\tsubTitle: '发现新版本',\r\n\t\t\t\tdownLoadBtnTextiOS: '立即跳转更新',\r\n\t\t\t\tdownLoadBtnText: '立即下载更新',\r\n\t\t\t\tdownLoadingText: '安装包下载中，请稍后'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisiOS() : boolean {\r\n\t\t\t\treturn this.platform.includes(platform_iOS);\r\n\t\t\t},\r\n\t\t\tisAndroid() : boolean {\r\n\t\t\t\treturn this.platform.includes(platform_Android);\r\n\t\t\t},\r\n\t\t\tneedNotificationProgress() : boolean {\r\n\t\t\t\treturn this.isAndroid && !this.is_mandatory\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeUnmount() {\r\n\t\t\tif (this.needNotificationProgress) {\r\n\t\t\t\tcancelNotificationProgress()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshow(shown : boolean, localPackageInfo : UniUpgradeCenterResult | null) {\r\n\t\t\t\tif (localPackageInfo === null) return;\r\n\r\n\t\t\t\tfor (let key in localPackageInfo) {\r\n\t\t\t\t\tif (requiredKey.indexOf(key) != -1 && localPackageInfo[key] === null) {\r\n\t\t\t\t\t\tconsole.error(`参数 ${key} 必填，请检查后重试`)\r\n\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.title = localPackageInfo.title\r\n\t\t\t\tthis.url = localPackageInfo.url\r\n\t\t\t\tthis.contents = localPackageInfo.contents\r\n\t\t\t\tthis.is_mandatory = localPackageInfo.is_mandatory\r\n\t\t\t\tthis.platform = localPackageInfo.platform\r\n\t\t\t\tthis.version = localPackageInfo.version\r\n\t\t\t\tthis.store_list = localPackageInfo.store_list\r\n\t\t\t\tthis.shown = shown\r\n\r\n\t\t\t\tthis.$emit('show')\r\n\t\t\t},\r\n\t\t\taskAbortDownload() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '是否取消下载？',\r\n\t\t\t\t\tcancelText: '否',\r\n\t\t\t\t\tconfirmText: '是',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tif (downloadTask !== null) downloadTask!.abort()\r\n\t\t\t\t\t\t\tthis.closePopup()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcloseUpdate() {\r\n\t\t\t\tif (this.downloading) {\r\n\t\t\t\t\tif (this.is_mandatory) {\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '下载中，请稍后……',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.needNotificationProgress) {\r\n\t\t\t\t\t\tthis.askAbortDownload()\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.closePopup()\r\n\t\t\t},\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.shown = false\r\n\t\t\t\tthis.downloadSuccess = false\r\n\t\t\t\tthis.downloading = false\r\n\t\t\t\tthis.downLoadPercent = 0\r\n\t\t\t\tthis.downloadedSize = 0\r\n\t\t\t\tthis.packageFileSize = 0\r\n\t\t\t\tthis.tempFilePath = ''\r\n\r\n\t\t\t\tthis.installing = false\r\n\t\t\t\tthis.installed = false\r\n\r\n\t\t\t\tif (this.needNotificationProgress) cancelNotificationProgress()\r\n\t\t\t\tthis.$emit('close')\r\n\t\t\t},\r\n\t\t\tupdateApp() {\r\n\t\t\t\tconst checkStoreScheme = this.checkStoreScheme()\r\n\t\t\t\tif (checkStoreScheme !== null) {\r\n\t\t\t\t\tcheckStoreScheme\r\n\t\t\t\t\t\t.then(_ => { })\r\n\t\t\t\t\t\t.catch(() => { this.downloadPackage() })\r\n\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\topenSchemePromise = null\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else { this.downloadPackage() }\r\n\t\t\t},\r\n\t\t\t// 跳转应用商店\r\n\t\t\tcheckStoreScheme() : Promise<boolean> | null {\r\n\t\t\t\tif (this.store_list !== null) {\r\n\t\t\t\t\tconst storeList : StoreListItem[] = this.store_list!.filter((item : StoreListItem) : boolean => item.enable)\r\n\t\t\t\t\tif (storeList.length > 0) {\r\n\t\t\t\t\t\tif (openSchemePromise === null) {\r\n\t\t\t\t\t\t\topenSchemePromise = Promise.reject() as Promise<boolean>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstoreList\r\n\t\t\t\t\t\t\t.sort((cur : StoreListItem, next : StoreListItem) : number => next.priority - cur.priority)\r\n\t\t\t\t\t\t\t.map((item : StoreListItem) : string => item.scheme)\r\n\t\t\t\t\t\t\t.reduce((promise : Promise<boolean>, cur : string) : Promise<boolean> => {\r\n\t\t\t\t\t\t\t\topenSchemePromise = promise.catch(() : Promise<boolean> => openSchema(cur))\r\n\t\t\t\t\t\t\t\treturn openSchemePromise!\r\n\t\t\t\t\t\t\t}, openSchemePromise!)\r\n\t\t\t\t\t\treturn openSchemePromise!\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null\r\n\t\t\t},\r\n\t\t\tdownloadPackage() {\r\n\t\t\t\t//下载包\r\n\t\t\t\tdownloadTask = uni.downloadFile({\r\n\t\t\t\t\turl: this.url,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t\tthis.tempFilePath = res.tempFilePath\r\n\t\t\t\t\t\t\tthis.downLoadComplete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log('downloadFile err: ', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (downloadTask !== null) {\r\n\t\t\t\t\tthis.downloading = true;\r\n\t\t\t\t\tif (this.needNotificationProgress) {\r\n\t\t\t\t\t\tthis.closePopup()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdownloadTask!.onProgressUpdate(res => {\r\n\t\t\t\t\t\tthis.downLoadPercent = parseFloat(res.progress.toFixed(0));\r\n\t\t\t\t\t\tthis.downloadedSize = parseFloat((res.totalBytesWritten / Math.pow(1024, 2)).toFixed(2));\r\n\t\t\t\t\t\tthis.packageFileSize = parseFloat((res.totalBytesExpectedToWrite / Math.pow(1024, 2)).toFixed(2));\r\n\r\n\t\t\t\t\t\tif (this.needNotificationProgress) {\r\n\t\t\t\t\t\t\tcreateNotificationProgress({\r\n\t\t\t\t\t\t\t\ttitle: \"升级中心正在下载安装包……\",\r\n\t\t\t\t\t\t\t\tcontent: `${this.downLoadPercent}%`,\r\n\t\t\t\t\t\t\t\tprogress: this.downLoadPercent,\r\n\t\t\t\t\t\t\t\tonClick: () => {\r\n\t\t\t\t\t\t\t\t\tif (!this.downloadSuccess) {\r\n\t\t\t\t\t\t\t\t\t\tthis.askAbortDownload()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} as CreateNotificationProgressOptions)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdownLoadComplete() {\r\n\t\t\t\tthis.downloadSuccess = true;\r\n\t\t\t\tthis.downloading = false;\r\n\r\n\t\t\t\tthis.downLoadPercent = 0\r\n\t\t\t\tthis.downloadedSize = 0\r\n\t\t\t\tthis.packageFileSize = 0\r\n\r\n\t\t\t\tdownloadTask = null;\r\n\r\n\t\t\t\tif (this.needNotificationProgress) {\r\n\t\t\t\t\tfinishNotificationProgress({\r\n\t\t\t\t\t\ttitle: \"安装升级包\",\r\n\t\t\t\t\t\tcontent: \"下载完成\",\r\n\t\t\t\t\t\tonClick() { }\r\n\t\t\t\t\t} as FinishNotificationProgressOptions)\r\n\r\n\t\t\t\t\tthis.installPackage();\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 强制更新，直接安装\r\n\t\t\t\tif (this.is_mandatory) {\r\n\t\t\t\t\tthis.installPackage();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinstallPackage() {\r\n\t\t\t\tthis.installing = true;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.flex-center {\r\n\r\n\r\n\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.mask {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, .65);\r\n\t}\r\n\r\n\t.content {\r\n\t\tposition: relative;\r\n\t\ttop: 0;\r\n\t\twidth: 600rpx;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.text {\r\n\t\tfont-family: Source Han Sans CN;\r\n\t}\r\n\r\n\t.content-top {\r\n\t\twidth: 100%;\r\n\t\tborder-bottom-color: #fff;\r\n\t\tborder-bottom-width: 15px;\r\n\t\tborder-bottom-style: solid;\r\n\t}\r\n\r\n\t.content-top-image {\r\n\t\twidth: 100%;\r\n\t\tposition: relative;\r\n\t\tbottom: -18px;\r\n\t}\r\n\r\n\t.content-top-text {\r\n\t\tfont-size: 22px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #F8F8FA;\r\n\t\tposition: absolute;\r\n\t\twidth: 65%;\r\n\t\ttop: 77.5px;\r\n\t\tleft: 25px;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.content-body {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 0 25px;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-bottom-left-radius: 15px;\r\n\t\tborder-bottom-right-radius: 15px;\r\n\t}\r\n\r\n\t.content-body-title {\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.content-body-title .version {\r\n\t\tpadding-left: 10px;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 10px;\r\n\t\tmargin-left: 5px;\r\n\t\tpadding: 2px 4px;\r\n\t\tborder-radius: 10px;\r\n\t\tbackground: #50aefd;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #3DA7FF;\r\n\t\tline-height: 38px;\r\n\t}\r\n\r\n\t.footer {\r\n\t\theight: 75px;\r\n\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.box-des-scroll {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 0 15px;\r\n\t\theight: 100px;\r\n\t}\r\n\r\n\t.box-des {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #000000;\r\n\t\tline-height: 25px;\r\n\t}\r\n\r\n\t.progress-box {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.progress {\r\n\t\twidth: 90%;\r\n\t\theight: 20px;\r\n\t}\r\n\r\n\t.content-bottom {\r\n\t\theight: 75px;\r\n\t}\r\n\r\n\t.close-img {\r\n\t\twidth: 35px;\r\n\t\theight: 35px;\r\n\t\tz-index: 1000;\r\n\t\tposition: relative;\r\n\t\tbottom: -25px;\r\n\t\tleft: 132px;\r\n\t}\r\n\r\n\t.content-button {\r\n\t\twidth: 100%;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\r\n\t\tfont-size: 15px;\r\n\t\tfont-weight: 400;\r\n\t\tborder-radius: 20px;\r\n\t\tborder: none;\r\n\t\tcolor: #fff;\r\n\r\n\t\ttext-align: center;\r\n\r\n\t\tbackground-color: #1785ff;\r\n\t}\r\n\r\n\t.flex-column {\r\n\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n</style>",null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAqEC,+CAAc;+CAAwC;AADtD,+CAAS;+CAA4B;+CAA4B;+BAsK3C;+BA1Id;+BAmCN;+BA6DM;;;wBAhEP,MAAgB;YACf,IAAI,IAAI,CAAC,wBAAwB,EAAE;gBAClC;YACD;QACD;;;;;;;;0BAnIW,KAAA,KAAK;YAAjB,mBA+DO,QAAA,qBA/DY,WAAM;gBACxB,mBA6DO,QAAA,SA7DD,WAAM,YAAS;oBAEpB,mBAIO,QAAA,SAJD,WAAM,gBAAa;wBACxB,mBAA+C,QAAA,SAAzC,WAAM,qBAAkB,gBAAG,KAAA,KAAK,GAAA,CAAA;wBACtC,mBACqE,SAAA,SAD9D,WAAM,qBAAoB,UAAK,YACrC,SAAI;;oBAGN,mBA8CO,QAAA,SA9CD,WAAM,iBAAc;wBACzB,mBAGO,QAAA,SAHD,WAAM,uBAAoB;4BAC/B,mBAA4C,QAAA,SAAtC,WAAM,eAAY,gBAAG,KAAA,QAAQ,GAAA,CAAA;4BACnC,mBAA8C,QAAA,SAAxC,WAAM,iBAAe,MAAC,gBAAE,KAAA,OAAO,GAAA,CAAA;;wBAEtC,mBAMO,QAAA,SAND,WAAM,SAAM;4BACjB,mBAIc,eAAA,SAJD,WAAM,kBAAiB,cAAS;gCAC5C,mBAEO,QAAA,SAFD,WAAM,iBAAc,gBACvB,KAAA,QAAQ,GAAA,CAAA;;;wBAIb,mBAiCO,QAAA,SAjCD,WAAM,uBAAoB;uCACf,KAAA,KAAK;gCAArB,mBAKW,UAAA,SAAA,SAAA,CAAA,GAAA;oCALY;iCAKvB,EAAA,EAAA;;gCACA,mBAyBW,UAAA,SAAA,SAAA,CAAA,GAAA;gDAxBO,KAAA,eAAe;wCAAhC,mBAcW,UAAA,SAAA,SAAA,CAAA,GAAA;uDAbmC,KAAA,WAAW;gDAAxD,mBAQO,QAAA,qBARD,WAAM;oDACX,YACwC,qBAAA,SAD9B,WAAM,YAAY,aAAS,KAAA,eAAe,EAAE,iBAAY,WAChE,eAAW,IAAI,EAAG,kBAAc,EAAE;;;oDACpC,mBAIO,QAAA,SAJD,WAAqE,eAArE,SAAA,WAAA,QAAA,qBAAA,gBAAA,oBAAA;wDACL,mBAAsE,QAAA,SAAhE,WAAM,QAAO,WAAwB,eAAxB,SAAA,eAAA,2BAA2B,KAAA,eAAe,GAAA,CAAA;wDAC7D,mBAC0E,QAAA,SADpE,WAAM,QACX,WAAwB,eAAxB,SAAA,eAAA,WAAyB,MAAC,gBAAE,KAAA,cAAc,IAAE,MAAC,gBAAE,KAAA,eAAe,IAAE,MAAE,CAAA;;;;gDAIrE,mBAES,UAAA,qBAFM,WAAM,kBAAkB,aAAO,KAAA,SAAS,mBACpD,KAAA,eAAe,GAAA,CAAA,EAAA;oDAAA;iDAAA;6CAAA;;;mDAIA,KAAA,eAAe,IAAA,CAAK,KAAA,SAAS;4CAAhD,mBAGS,UAAA,qBAHyC,WAAM,kBAAkB,aAAS,KAAA,UAAU,EAC3F,cAAU,KAAA,UAAU,EAAG,aAAO,KAAA,cAAc,mBAC3C,IAAA,KAAA,UAAU;gDAAA;;gDAAA;6CAAA,GAAA,CAAA,EAAA;gDAAA;gDAAA;gDAAA;6CAAA;;uDAGM,KAAA,SAAS;gDAA5B,mBAES,UAAA,qBAFqB,WAAM,kBAAkB,aAAO,KAAA,cAAc,GAAE,gBAE7E,CAAA,EAAA;oDAAA;iDAAA;;;;;;;;;;oBAKH,mBAIO,QAAA,SAJD,WAAM,mBAAgB;oCACb,KAAA,YAAY;4BAA1B,mBAEQ,SAAA,qBAFoB,WAAM,aAAY,UAAK,YAClD,SAAI,mEAAmE,aAAO,KAAA,WAAW;;;;;;;;;;;;;;aAuB1F;aAEA;aAGA;aACA;aAGA;aACA;aAEA;aACA;aACA;aAEA;aAGA;aACA;aACA;aACA;aACA;aACA,mBAAgB,MAAM;aACtB;aAGA;aACA;aACA;aACA;oBAIS,OAAM;wBAGF,OAAM;uCAGS,OAAM;;;wBAzClC,WAAO,KAAK,EAEZ,8BAA0B,IAG1B,eAAW,KAAK,EAChB,gBAAY,KAAK,EAGjB,qBAAiB,KAAK,EACtB,iBAAa,KAAK,EAElB,qBAAiB,CAAC,EAClB,oBAAgB,CAAC,EACjB,qBAAiB,CAAC,EAElB,kBAAc,IAGd,WAAO,QACP,cAAU,IACV,aAAS,IACT,kBAAc,KAAK,EACnB,SAAK,IACL,cAAU,WAAM,MAAM,KACtB,gBAAY,IAAG,CAAE,EAAC,2BAGlB,cAAU,SACV,wBAAoB,UACpB,qBAAiB,UACjB,qBAAiB,kCAIR,OAAM,EAAhB,OAAU,OAAM,CAAE;YACjB,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAC/B;mCACc,OAAM,EAApB,OAAc,OAAM,CAAE;YACrB,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAC/B;kDAC6B,OAAM,EAAnC,OAA6B,OAAM,CAAE;YACpC,OAAO,IAAI,CAAC,SAAQ,IAAK,CAAC,IAAI,CAAC,YAAW;QAC3C;;;;aAQA,OAAA,IAAK,OAAQ,OAAO,EAAE,yCAAgD,EAAE;YACvE,IAAI,qBAAqB,IAAI;gBAAE;;YAE/B,IAAS,OAAO,iBAAkB;gBACjC,IAAI,YAAY,OAAO,CAAC,QAAQ,CAAC,CAAA,IAAK,gBAAgB,CAAC,IAAG,KAAM,IAAI,EAAE;oBACrE,QAAQ,KAAK,CAAC,AAAC,kBAAK,MAAG,2DAAY;oBACnC;oBACA;gBACD;YACD;YAEA,IAAI,CAAC,KAAI,GAAI,iBAAiB,KAAI;YAClC,IAAI,CAAC,GAAE,GAAI,iBAAiB,GAAE;YAC9B,IAAI,CAAC,QAAO,GAAI,iBAAiB,QAAO;YACxC,IAAI,CAAC,YAAW,GAAI,iBAAiB,YAAW;YAChD,IAAI,CAAC,QAAO,GAAI,iBAAiB,QAAO;YACxC,IAAI,CAAC,OAAM,GAAI,iBAAiB,OAAM;YACtC,IAAI,CAAC,UAAS,GAAI,iBAAiB,UAAS;YAC5C,IAAI,CAAC,KAAI,GAAI;YAEb,IAAI,CAAC,OAAK,CAAC;QACZ;;aACA,mBAAA,MAAmB;YAClB,+BACC,QAAO,WACP,aAAY,KACZ,cAAa,KACb,UAAS,IAAA,IAAO;gBACf,IAAI,IAAI,OAAO,EAAE;oBAChB,IAAI,iBAAiB,IAAI;wBAAE,eAAc,KAAK;;oBAC9C,IAAI,CAAC,UAAU;gBAChB;YACD;;QAEF;;aACA,cAAA,MAAc;YACb,IAAI,IAAI,CAAC,WAAW,EAAE;gBACrB,IAAI,IAAI,CAAC,YAAY,EAAE;oBACtB,OAAO,+BACN,QAAO,aACP,OAAM,QACN,WAAU,GAAE;gBAEd;gBACA,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;oBACnC,IAAI,CAAC,gBAAgB;oBACrB;gBACD;YACD;YACA,IAAI,CAAC,UAAU;QAChB;;aACA,aAAA,MAAa;YACZ,IAAI,CAAC,KAAI,GAAI,KAAI;YACjB,IAAI,CAAC,eAAc,GAAI,KAAI;YAC3B,IAAI,CAAC,WAAU,GAAI,KAAI;YACvB,IAAI,CAAC,eAAc,GAAI,CAAA;YACvB,IAAI,CAAC,cAAa,GAAI,CAAA;YACtB,IAAI,CAAC,eAAc,GAAI,CAAA;YACvB,IAAI,CAAC,YAAW,GAAI;YAEpB,IAAI,CAAC,UAAS,GAAI,KAAI;YACtB,IAAI,CAAC,SAAQ,GAAI,KAAI;YAErB,IAAI,IAAI,CAAC,wBAAwB;gBAAE;;YACnC,IAAI,CAAC,OAAK,CAAC;QACZ;;aACA,YAAA,MAAY;YACX,IAAM,mBAAmB,IAAI,CAAC,gBAAgB;YAC9C,IAAI,qBAAqB,IAAI,EAAE;gBAC9B,iBACE,IAAI,CAAC,IAAA,EAAK,CAAE,GACZ,OAAK,CAAC,KAAM;oBAAE,IAAI,CAAC,eAAe;gBAAG,GACrC,SAAO,CAAC,KAAM;oBACd,oBAAoB,IAAG;gBACxB;YACF,OAAO;gBAAE,IAAI,CAAC,eAAe;YAAG;QACjC;;aAEA,mBAAA,OAAqB,WAAQ,OAAO,GAAS;YAC5C,IAAI,IAAI,CAAC,UAAS,KAAM,IAAI,EAAE;gBAC7B,IAAM,qCAA8B,IAAI,CAAC,UAAU,GAAE,MAAM,CAAC,IAAC,sBAAwB,OAAM;2BAAK,KAAK,MAAM;;;gBAC3G,IAAI,UAAU,MAAK,GAAI,CAAC,EAAE;oBACzB,IAAI,sBAAsB,IAAI,EAAE;wBAC/B,oBAAoB,WAAQ,MAAM,GAAG,EAAC,CAAE,WAAQ,OAAO;oBACxD;oBACA,UACE,IAAI,CAAC,IAAC,oBAAqB,sBAAwB,MAAK;+BAAK,KAAK,QAAO,GAAI,IAAI,QAAQ;;sBACzF,GAAG,CAAC,IAAC,sBAAwB,MAAK;+BAAK,KAAK,MAAM;;sBAClD,MAAM,CAAC,IAAC,SAAU,WAAQ,OAAO,GAAG,KAAM,MAAM,GAAI,WAAQ,OAAO,EAAK;wBACxE,oBAAoB,QAAQ,OAAK,CAAC,OAAK,WAAQ,OAAO;mCAAK,WAAW;;;wBACtE,OAAO;oBACR;sBAAG;oBACJ,OAAO;gBACR;YACD;YAEA,OAAO,IAAG;QACX;;aACA,kBAAA,MAAkB;YAEjB,eAAe,qCACd,MAAK,IAAI,CAAC,GAAG,EACb,UAAS,IAAA,IAAO;gBACf,IAAI,IAAI,UAAS,IAAK,GAAG,EAAE;oBAC1B,IAAI,CAAC,YAAW,GAAI,IAAI,YAAW;oBACnC,IAAI,CAAC,gBAAgB;gBACtB;YACD;cACA,OAAM,IAAA,IAAO;gBACZ,QAAQ,GAAG,CAAC,sBAAsB,KAAI;YACvC;;YAED,IAAI,iBAAiB,IAAI,EAAE;gBAC1B,IAAI,CAAC,WAAU,GAAI,IAAI;gBACvB,IAAI,IAAI,CAAC,wBAAwB,EAAE;oBAClC,IAAI,CAAC,UAAU;gBAChB;gBACA,eAAc,gBAAgB,CAAC,IAAA,IAAO;oBACrC,IAAI,CAAC,eAAc,GAAI,WAAW,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACxD,IAAI,CAAC,cAAa,GAAI,WAAW,CAAC,IAAI,iBAAgB,GAAI,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;oBACtF,IAAI,CAAC,eAAc,GAAI,WAAW,CAAC,IAAI,yBAAwB,GAAI,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;oBAE/F,IAAI,IAAI,CAAC,wBAAwB,EAAE;wBAClC,6DACC,QAAO,iBACP,UAAS,AAAC,KAAE,IAAI,CAAC,eAAe,GAAC,KACjC,WAAU,IAAI,CAAC,eAAe,EAC9B,UAAS,KAAM;4BACd,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gCAC1B,IAAI,CAAC,gBAAgB;4BACtB;wBACD;;oBAEF;gBACD;;YACD;QACD;;aACA,mBAAA,MAAmB;YAClB,IAAI,CAAC,eAAc,GAAI,IAAI;YAC3B,IAAI,CAAC,WAAU,GAAI,KAAK;YAExB,IAAI,CAAC,eAAc,GAAI,CAAA;YACvB,IAAI,CAAC,cAAa,GAAI,CAAA;YACtB,IAAI,CAAC,eAAc,GAAI,CAAA;YAEvB,eAAe,IAAI;YAEnB,IAAI,IAAI,CAAC,wBAAwB,EAAE;gBAClC,6DACC,QAAO,SACP,UAAS,QACT,UAAA,MAAU,CAAE;gBAGb,IAAI,CAAC,cAAc;gBACnB;YACD;YAGA,IAAI,IAAI,CAAC,YAAY,EAAE;gBACtB,IAAI,CAAC,cAAc;YACpB;QACD;;aACA,iBAAA,MAAiB;YAChB,IAAI,CAAC,UAAS,GAAI,IAAI;QA4BvB;;;sBAhMA,OAAK,OAAQ,OAAO,EAAE;sBAsBtB;sBAaA;sBAgBA;sBAeA;sBAYA,wBAAqB,WAAQ,OAAO;sBAoBpC;sBAuCA;sBA0BA"}