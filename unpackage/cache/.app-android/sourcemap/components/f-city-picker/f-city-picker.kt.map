{"version":3,"sources":["components/f-city-picker/f-city-picker.uvue","uni_modules/uni-installApk/utssdk/interface.uts"],"sourcesContent":["<template>\r\n\t<view v-if=\"show\" class=\"popup-mask\" @click=\"close\"></view>\r\n\t<view class=\"popup\" :class=\"show ? 'popup-show' : ''\">\r\n\t\t<view class=\"popup-header\">\r\n\t\t\t<text class=\"iconfont popup-action\" style=\"font-size: 22px;\" @click=\"close\">×</text>\r\n\t\t\t<text class=\"popup-title\">选择地址</text>\r\n\t\t\t<text class=\"popup-action\" style=\"color: #949494;\" @click=\"confirm\">完成</text>\r\n\t\t</view>\r\n\t\t<picker-view indicator-style=\"height: 40px;\" class=\"picker-view\" :value=\"pickerValue\" @change=\"pickerChange\">\r\n\t\t\t<picker-view-column>\r\n\t\t\t\t<view v-for=\"(item,index) in provinceDataList\" :key=\"index\">\r\n\t\t\t\t\t<text class=\"picker-item\">{{item.label}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</picker-view-column>\r\n\t\t\t<picker-view-column>\r\n\t\t\t\t<view v-for=\"(item,index) in cityDataList\" :key=\"index\">\r\n\t\t\t\t\t<text class=\"picker-item\">{{item.label}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</picker-view-column>\r\n\t\t\t<picker-view-column>\r\n\t\t\t\t<view v-for=\"(item,index) in areaDataList\" :key=\"index\">\r\n\t\t\t\t\t<text class=\"picker-item\">{{item.label}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</picker-view-column>\r\n\t\t</picker-view>\r\n\t</view>\r\n\t<view @click.stop=\"open\">\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { PropType,ComponentPublicInstance } from \"vue\"\r\n\timport { cityItem, citypickerChangeEvent } from \"./type\"\r\n\timport provinceData from './city-data/province';\r\n\timport cityData from './city-data/city';\r\n\timport areaData from './city-data/area';\r\n\texport default {\r\n\t\temits: [\"confirm\"],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpickerValue: [0, 0, 0] as number[],\r\n\t\t\t\tprovinceDataList: provinceData as cityItem[],\r\n\t\t\t\tcityDataList: cityData[0] as cityItem[],\r\n\t\t\t\tareaDataList: areaData[0][0] as cityItem[],\r\n\t\t\t\tcitypickerRef: null as ComponentPublicInstance | null,\r\n\t\t\t\tshow:false\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\t// props: {\r\n\t\t// \t/* 默认值 */\r\n\t\t// \tpickerValueDefault: {\r\n\t\t// \t\ttype: Array as PropType<number[]>,\r\n\t\t// \t\tdefault() : number[] {\r\n\t\t// \t\t\treturn [0, 0, 0] as number[]\r\n\t\t// \t\t}\r\n\t\t// \t},\r\n\t\t// },\r\n\t\twatch: {\r\n\t\t\tpickerValueDefault() {\r\n\t\t\t\tthis.init();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.citypickerRef = this.$refs[\"citypicker\"] as ComponentPublicInstance\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\topen() {\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\t//this.handPickValueDefault(); // 对 pickerValueDefault 做兼容处理\r\n\r\n\t\t\t\tlet pickerValueDefault = [0, 0, 0] as number[]\r\n\t\t\t\t// if (this.pickerValueDefault != null) {\r\n\t\t\t\t// \tpickerValueDefault = this.pickerValueDefault as number[]\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tthis.cityDataList = cityData[pickerValueDefault[0]];\r\n\t\t\t\tthis.areaDataList = areaData[pickerValueDefault[0]][pickerValueDefault[1]];\r\n\t\t\t\tthis.pickerValue = pickerValueDefault;\r\n\t\t\t},\r\n\t\t\t// handPickValueDefault() {\r\n\t\t\t// \tconst pickerValueDefault = this.pickerValueDefault as number[]\r\n\r\n\t\t\t// \tlet provinceIndex = 0\r\n\t\t\t// \tlet cityIndex = 0\r\n\t\t\t// \tlet areaIndex = 0\r\n\t\t\t// \tif(pickerValueDefault.length != 3){\r\n\t\t\t// \t\treturn\r\n\t\t\t// \t}\r\n\t\t\t// \tprovinceIndex = pickerValueDefault[0] as number\r\n\t\t\t// \tcityIndex = pickerValueDefault[1] as number\r\n\t\t\t// \tareaIndex = pickerValueDefault[2] as number\r\n\t\t\t// \tif (provinceIndex !== 0 || cityIndex !== 0 || areaIndex !== 0) {\r\n\t\t\t// \t\tif (provinceIndex > provinceData.length - 1) {\r\n\t\t\t// \t\t\tthis.pickerValueDefault[0] as number = provinceIndex as number = parseInt(provinceData.length - 1);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tif (cityIndex > cityData[provinceIndex].length - 1) {\r\n\t\t\t// \t\t\tthis.pickerValueDefault[1] as number = cityIndex as number = parseInt(cityData[provinceIndex].length - 1);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tif (areaIndex > areaData[provinceIndex][cityIndex].length - 1) {\r\n\t\t\t// \t\t\tthis.pickerValueDefault[2] as number = parseInt(areaData[provinceIndex][cityIndex].length - 1);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\t\t\tpickerChange(e : PickerViewChangeEvent) {\r\n\t\t\t\tlet changePickerValue = e.detail.value;\r\n\t\t\t\tif (this.pickerValue[0] !== changePickerValue[0]) {\r\n\t\t\t\t\t// 第一级发生滚动\r\n\t\t\t\t\tthis.cityDataList = cityData[changePickerValue[0]];\r\n\t\t\t\t\tthis.areaDataList = areaData[changePickerValue[0]][0];\r\n\t\t\t\t\tchangePickerValue[1] = 0;\r\n\t\t\t\t\tchangePickerValue[2] = 0;\r\n\t\t\t\t} else if (this.pickerValue[1] !== changePickerValue[1]) {\r\n\t\t\t\t\t// 第二级滚动\r\n\t\t\t\t\tthis.areaDataList =\r\n\t\t\t\t\t\tareaData[changePickerValue[0]][changePickerValue[1]];\r\n\t\t\t\t\tchangePickerValue[2] = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.pickerValue = changePickerValue;\r\n\t\t\t\t// this._$emit('onChange');\r\n\t\t\t},\r\n\t\t\tconfirm() {\r\n\t\t\t\tlet pickObj = {\r\n\t\t\t\t\tlabel: this._getLabel(),\r\n\t\t\t\t\tvalue: this.pickerValue,\r\n\t\t\t\t\tcityCode: this._getCityCode()\r\n\t\t\t\t} as citypickerChangeEvent;\r\n\t\t\t\tthis.$emit(\"confirm\", pickObj);\r\n\t\t\t\tthis.close()\r\n\t\t\t},\r\n\t\t\t// _$emit(emitName:string) {\r\n\t\t\t// \tlet pickObj = {\r\n\t\t\t// \t\tlabel: this._getLabel(),\r\n\t\t\t// \t\tvalue: this.pickerValue,\r\n\t\t\t// \t\tcityCode: this._getCityCode()\r\n\t\t\t// \t} as citypickerChangeEvent;\r\n\t\t\t// \tthis.$emit(emitName, pickObj);\r\n\t\t\t// },\r\n\t\t\t_getLabel() : string {\r\n\t\t\t\tlet pcikerLabel =\r\n\t\t\t\t\tthis.provinceDataList[this.pickerValue[0]].label +\r\n\t\t\t\t\t'-' +\r\n\t\t\t\t\tthis.cityDataList[this.pickerValue[1]].label +\r\n\t\t\t\t\t'-' +\r\n\t\t\t\t\tthis.areaDataList[this.pickerValue[2]].label;\r\n\t\t\t\treturn pcikerLabel;\r\n\t\t\t},\r\n\t\t\t_getCityCode() : string {\r\n\t\t\t\treturn this.areaDataList[this.pickerValue[2]].value;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.popup-mask {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tright:0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\tz-index: 99;\r\n\t}\r\n\t.popup {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tleft: 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\tz-index: 100;\r\n\t\tborder-top-left-radius: 15px;\r\n\t\tborder-top-right-radius: 15px;\r\n\t\ttransform: translateY(1000px);\r\n\t\topacity: 0;\r\n\t\ttransition-property: transform,opacity;\r\n\t\ttransition-duration: 400ms;\r\n\t}\r\n\t.popup-show {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\t.popup-header {\r\n\t\t\r\n\t\theight: 112rpx;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tborder-bottom: 1px solid #ececec;\r\n\t}\r\n\t.popup-action {\r\n\t\tfont-size: 16px;\r\n\t\twidth: 100rpx;\r\n\t\theight: 112rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 112rpx;\r\n\t}\r\n\t.popup-title {\r\n\t\tflex: 1;text-align: center;font-weight: bold;font-size: 16px;\r\n\t}\r\n\t.picker-view {\r\n\t\twidth: 750rpx;\r\n\t\theight: 500rpx;\r\n\t}\r\n\r\n\t.picker-item {\r\n\t\ttext-align: center;\r\n\t\tline-height: 40px;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tfont-size: 16px;\r\n\t}\r\n</style>",null],"names":[],"mappings":"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"}