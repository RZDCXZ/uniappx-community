{"version":3,"sources":["components/f-picker/f-picker.uvue"],"sourcesContent":["<template>\r\n\t<view v-if=\"show\" class=\"popup-mask\" @click.stop=\"close\"></view>\r\n\t<view class=\"popup\" :class=\"show ? 'popup-show' : ''\">\r\n\t\t<view class=\"popup-header\">\r\n\t\t\t<text class=\"iconfont popup-action\" style=\"font-size: 22px;\" @click=\"close\">×</text>\r\n\t\t\t<text class=\"popup-title\">{{ t }}</text>\r\n\t\t\t<text class=\"popup-action\" style=\"color: #949494;\" @click=\"confirm\">完成</text>\r\n\t\t</view>\r\n\t\t<picker-view v-if=\"mode == 'selector'\" class=\"popup-picker\" indicator-style=\"height: 50px;background-color:rgba(0,0,0,0.05);\" @change=\"change\">\r\n\t\t\t<picker-view-column>\r\n\t\t\t\t<view class=\"popup-picker-item\"  v-for=\"(item,index) in range\" :key=\"index\">\r\n\t\t\t\t\t<text class=\"popup-picker-text\">{{ item }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</picker-view-column>\r\n\t\t</picker-view>\r\n\t\t\r\n\t\t<picker-view v-else-if=\"mode == 'date'\" class=\"popup-picker\" indicator-style=\"height: 50px;background-color:rgba(0,0,0,0.05);\" :value=\"value\" @change=\"change\">\r\n\t\t    <picker-view-column>\r\n\t\t        <view class=\"popup-picker-item\" v-for=\"(item,index) in years\" :key=\"index\"><text class=\"popup-picker-text\">{{item}}年</text></view>\r\n\t\t    </picker-view-column>\r\n\t\t    <picker-view-column>\r\n\t\t        <view class=\"popup-picker-item\" v-for=\"(item,index) in months\" :key=\"index\"><text class=\"popup-picker-text\">{{item}}月</text>\r\n\t\t        </view>\r\n\t\t    </picker-view-column>\r\n\t\t    <picker-view-column>\r\n\t\t        <view class=\"popup-picker-item\" v-for=\"(item,index) in days\" :key=\"index\"><text class=\"popup-picker-text\">{{item}}日</text></view>\r\n\t\t    </picker-view-column>\r\n\t\t</picker-view>\r\n\t\t\r\n\t</view>\r\n\t<view @click.stop=\"open\">\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { PropType } from 'vue'\r\n\timport { datepickerChangeEvent } from \"./type\"\r\n\texport default {\r\n\t\tname:\"f-picker\",\r\n\t\temits:[\"confirm\"],\r\n\t\tprops: {\r\n\t\t\ttitle:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:\"\"\r\n\t\t\t},\r\n\t\t\tmode:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:\"selector\"\r\n\t\t\t},\r\n\t\t\trange:{\r\n\t\t\t\ttype:Array as PropType<string[]>,\r\n\t\t\t\tdefault() : string[] {\r\n\t\t\t\t\treturn [] as string[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tt:\"选择\",\r\n\t\t\t\tvalue:[0] as number[],\r\n\t\t\t\tshow:false,\r\n\t\t\t\t\r\n\t\t\t\tyears: [] as number[],\r\n\t\t\t\tyear: 0 as number,\r\n\t\t\t\tmonths: [] as number[],\r\n\t\t\t\tmonth: 0 as number,\r\n\t\t\t\tdays: [] as number[],\r\n\t\t\t\tday: 0 as number,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif(this.title != \"\"){\r\n\t\t\t\tthis.t = this.title\r\n\t\t\t} else {\r\n\t\t\t\tswitch (this.mode){\r\n\t\t\t\t\tcase \"selector\":\r\n\t\t\t\t\tthis.t = \"\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"date\":\r\n\t\t\t\t\tthis.t = \"选择日期\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 初始化\r\n\t\t\tinit(){\r\n\t\t\t\tif(this.mode == \"date\"){\r\n\t\t\t\t\tconst date = new Date()\r\n\t\t\t\t\tconst _years : number[] = []\r\n\t\t\t\t\tconst _year = date.getFullYear()\r\n\t\t\t\t\tconst _months : number[] = []\r\n\t\t\t\t\tconst _month : number = date.getMonth() + 1\r\n\t\t\t\t\tconst _days : number[] = []\r\n\t\t\t\t\tconst _day = date.getDate()\r\n\t\t\t\t\tfor (let i = 1949; i <= _year; i++) {\r\n\t\t\t\t\t    _years.push(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i = 1; i <= 12; i++) {\r\n\t\t\t\t\t    _months.push(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i = 1; i <= 31; i++) {\r\n\t\t\t\t\t    _days.push(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.years = _years\r\n\t\t\t\t\tthis.year = _year\r\n\t\t\t\t\tthis.months = _months\r\n\t\t\t\t\tthis.month = _month\r\n\t\t\t\t\tthis.days = _days\r\n\t\t\t\t\tthis.day = _day\r\n\t\t\t\t\tthis.value = [_year - 2000, _month - 1, _day - 1] as number[]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topen(){\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\tchange(e:UniPickerViewChangeEvent){\r\n\t\t\t\tconst val = e.detail.value\r\n\t\t\t\tthis.value = val\r\n\t\t\t\tif(this.mode == \"date\"){\r\n\t\t\t\t\tthis.year = this.years[val[0]]\r\n\t\t\t\t\tthis.month = this.months[val[1]]\r\n\t\t\t\t\tthis.day = this.days[val[2]]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tconfirm(){\r\n\t\t\t\tswitch (this.mode){\r\n\t\t\t\t\tcase \"selector\":\r\n\t\t\t\t\tthis.$emit(\"confirm\",this.value[0] as number)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"date\":\r\n\t\t\t\t\tlet pickObj = {\r\n\t\t\t\t\t\tyear:this.year,\r\n\t\t\t\t\t\tmonth:this.month,\r\n\t\t\t\t\t\tday:this.day,\r\n\t\t\t\t\t\tlabel:`${this.year}-${this._getValue(this.month)}-${this._getValue(this.day)}`\r\n\t\t\t\t\t} as datepickerChangeEvent;\r\n\t\t\t\t\tthis.$emit(\"confirm\", pickObj.label);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.close()\r\n\t\t\t},\r\n\t\t\t_getValue(v:number):string{\r\n\t\t\t\tif(v >= 10){\r\n\t\t\t\t\treturn v.toString()\r\n\t\t\t\t}\r\n\t\t\t\treturn `0${v}`\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n.popup-mask {\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright:0;\r\n\tbottom: 0;\r\n\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\tz-index: 99;\r\n}\r\n.popup {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tright: 0;\r\n\tleft: 0;\r\n\tbackground-color: #ffffff;\r\n\tz-index: 100;\r\n\tborder-top-left-radius: 15px;\r\n\tborder-top-right-radius: 15px;\r\n\ttransform: translateY(1000px);\r\n\topacity: 0;\r\n\ttransition-property: transform,opacity;\r\n\ttransition-duration: 400ms;\r\n}\r\n.popup-show {\r\n\topacity: 1;\r\n\ttransform: translateY(0);\r\n}\r\n.popup-header {\r\n\theight: 112rpx;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tborder-bottom: 1px solid #ececec;\r\n}\r\n.popup-action {\r\n\tfont-size: 16px;\r\n\twidth: 100rpx;\r\n\theight: 112rpx;\r\n\ttext-align: center;\r\n\tline-height: 112rpx;\r\n}\r\n.popup-title {\r\n\tflex: 1;\r\n\ttext-align: center;\r\n\tfont-weight: bold;\r\n\tfont-size: 16px;\r\n}\r\n\r\n.popup-picker {\r\n\theight: 400rpx;\r\n}\r\n.popup-picker-item {\r\n\theight: 50px;\r\n}\r\n.popup-picker-text {\r\n\ttext-align: center;\r\n\tline-height: 50px;\r\n}\r\n\r\n/* .picker-view {\r\n\twidth: 100%;\r\n\theight: 320px;\r\n\tmargin-top: 10px;\r\n} */\r\n</style>"],"names":[],"mappings":"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"}