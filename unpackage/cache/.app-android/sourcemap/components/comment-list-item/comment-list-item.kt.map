{"version":3,"sources":["components/comment-list-item/comment-list-item.uvue","components/article-list-item/article-list-item.uvue","store/user.uts","common/socket.uts"],"sourcesContent":["<template>\n\t<!-- 头部 -->\r\n\t<view class=\"list-item-header\">\r\n\t\t<avatar :src=\"item.avatar\" style=\"margin-right: 27rpx;\"></avatar>\r\n\t\t<view>\r\n\t\t\t<text class=\"nickname\">{{ item.name }}</text>\r\n\t\t\t<text class=\"time\">{{ item.create_time }}</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<text class=\"iconfont delete-icon\" v-if=\"isAdmin\" @click.stop=\"deleteItem\">{{ '\\ue605' }}</text>\r\n\t</view>\r\n\t<!-- 文字内容 -->\r\n\t<text class=\"content\">{{ item.content }}</text>\r\n\t\r\n\t<!-- 引用 -->\r\n\t<view class=\"quote\" @click.stop=\"openDetail\">\r\n\t\t<text class=\"quote-text\">{{ item.article_title }}</text>\r\n\t\t<image v-if=\"item.article_cover != null\" :src=\"item.article_cover\" mode=\"aspectFill\" class=\"quote-img\"></image>\r\n\t</view>\r\n\t\r\n\t<view class=\"divider\"></view>\n</template>\n\n<script>\r\n\timport { CommentItem,defaultResult } from \"@/common/type.uts\"\r\n\timport { getURL } from \"@/common/request.uts\"\r\n\timport { getToken } from \"@/store/user.uts\"\r\n\timport { PropType } from \"vue\"\n\texport default {\r\n\t\temits:[\"onDeleteSuccess\"],\n\t\tname:\"comment-list-item\",\n\t\tprops: {\r\n\t\t\titem: {\r\n\t\t\t\ttype: Object as PropType<CommentItem>,\r\n\t\t\t\trequired:true \r\n\t\t\t},\r\n\t\t\tisAdmin: {\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\topenDetail() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/detail/detail?id='+this.item.article_id,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdeleteItem(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: '是否要删除该评论？',\r\n\t\t\t\t\tconfirmText: '删除',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif(!res.confirm){\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '删除中...',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tuni.request<defaultResult>({\r\n\t\t\t\t\t\t\turl: getURL(`/comment/delete/${this.item.id}`),\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\ttoken:getToken()\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tlet r = res.data\r\n\t\t\t\t\t\t\t\tif(r == null) return\r\n\t\t\t\t\t\t\t\tif(res.statusCode !=200){\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: r.msg,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: r.msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.$emit(\"onDeleteSuccess\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\n\t}\n</script>\n\n<style>\n/* 头部 */\r\n.list-item-header {\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tpadding-top: 26rpx;\r\n\tpadding-left: 33rpx;\r\n\tpadding-right: 33rpx;\r\n}\r\n\r\n.time {\r\n\tfont-size: 13px;\r\n\tcolor: #a7a7a7;\r\n\tmargin-top: 10rpx;\r\n}\r\n.nickname {\r\n\tcolor: #050505;\r\n\ttext-overflow: ellipsis;\r\n\tmax-width: 240rpx;\r\n\theight: 34rpx;\r\n\tfont-size: 15px;\r\n\tfont-weight: bold;\r\n}\r\n.content {\r\n\tpadding-top: 25rpx;\r\n\tpadding-left: 33rpx;\r\n\tpadding-right: 33rpx;\r\n\tfont-size: 16px;\r\n\tline-height: 1.5;\r\n}\r\n.quote {\r\n\twidth: 690rpx;\r\n\tmargin-left: 30rpx;\r\n\tmargin-right: 30rpx;\r\n\theight: 96rpx;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tbackground-color: #f9f9f9;\r\n\tborder-radius: 5px;\r\n\tmargin-top: 30rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n.quote-text {\r\n\twidth: 530rpx;\r\n\ttext-overflow: ellipsis;\r\n\theight: 35rpx;\r\n\tmargin-right: 30rpx;\r\n\tmargin-left: 30rpx;\r\n\tfont-size: 15px;\r\n}\r\n.quote-img {\r\n\twidth: 96rpx;\r\n\theight: 96rpx;\r\n\tmargin-left: auto;\r\n}\r\n.delete-icon {\r\n\tmargin-left: auto;\r\n\tpadding: 10rpx;\r\n\tcolor: #999999;\r\n}\n</style>",null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAgBE;;;+BA+EI;;;;;;;;;;;YA7FL,mBAQO,QAAA,SARD,WAAM,qBAAkB;gBAC7B,YAAiE,mBAAA,SAAxD,SAAK,KAAA,IAAI,CAAC,MAAM,EAAE,WAA4B,eAA5B,SAAA,kBAAA;;;;gBAC3B,mBAGO,QAAA,IAAA,EAAA;oBAFN,mBAA6C,QAAA,SAAvC,WAAM,aAAU,gBAAI,KAAA,IAAI,CAAC,IAAI,GAAA,CAAA;oBACnC,mBAAgD,QAAA,SAA1C,WAAM,SAAM,gBAAI,KAAA,IAAI,CAAC,WAAW,GAAA,CAAA;;2BAGE,KAAA,OAAO;oBAAhD,mBAAgG,QAAA,qBAA1F,WAAM,wBAAuC,aAAK,cAAO,KAAA,UAAU,EAAA;wBAAA;qBAAA,oBAAK,WAAQ,CAAA,EAAA;wBAAA;qBAAA;;;;;YAGvF,mBAA+C,QAAA,SAAzC,WAAM,YAAS,gBAAI,KAAA,IAAI,CAAC,OAAO,GAAA,CAAA;YAGrC,mBAGO,QAAA,SAHD,WAAM,SAAS,aAAK,cAAO,KAAA,UAAU,EAAA;gBAAA;aAAA;gBAC1C,mBAAwD,QAAA,SAAlD,WAAM,eAAY,gBAAI,KAAA,IAAI,CAAC,aAAa,GAAA,CAAA;gBACjC,IAAA,KAAA,IAAI,CAAC,aAAa,IAAA,IAAA;oBAA/B,mBAA+G,SAAA,qBAArE,SAAK,KAAA,IAAI,CAAC,aAAa,EAAE,UAAK,cAAa,WAAM;;;;;;;;;YAG5F,mBAA6B,QAAA,SAAvB,WAAM;;;;;;aAsBV,aAAA,MAAa;YACZ,iCACC,MAAK,6BAA2B,IAAI,CAAC,IAAI,CAAC,UAAU;QAEtD;;aACA,aAAA,MAAY;YACX,+BACC,QAAO,IACP,UAAS,aACT,cAAa,MACb,UAAS,IAAA,IAAO;gBACf,IAAG,CAAC,IAAI,OAAO,EAAC;oBACf;gBACD;gBACA,mCACC,QAAO,UACP,OAAM,IAAG;gBAEV,0CACC,MAAK,OAAO,AAAC,qBAAkB,IAAI,CAAC,IAAI,CAAC,EAAE,GAC3C,SAAQ,QACR,SAAQ;oBACP,IAAA,QAAM;iBACN,EACD,UAAS,IAAA,IAAO;oBACf,IAAI,IAAI,IAAI,IAAG;oBACf,IAAG,KAAK,IAAI;wBAAE;;oBACd,IAAG,IAAI,UAAS,IAAI,GAAG,EAAC;wBACvB,+BACC,QAAO,EAAE,GAAG,EACZ,OAAM;wBAEP;oBACD;oBAEA,+BACC,QAAO,EAAE,GAAG,EACZ,OAAM;oBAGP,IAAI,CAAC,OAAK,CAAC;gBACZ;kBACA,OAAM,IAAC,IAAQ;oBACd,+BACC,QAAO,IAAI,MAAM,EACjB,OAAM;gBAER;kBACA,WAAU,MAAM;oBACf;gBACD;;YAEF;;QAEF;;;sBAtDA;sBAKA;;mBAjBI;;;;;;;;;;;;;;wGAIM,IAAG,2DAIJ,KAAI"}