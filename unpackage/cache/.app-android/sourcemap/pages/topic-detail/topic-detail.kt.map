{"version":3,"sources":["pages/topic-detail/topic-detail.uvue","pages/long-list/long-list-page.uvue","uni_modules/uni-upgrade-center-app/utils/call-check-version.ts","components/article-list-item/article-list-item.uvue","components/topic-list-item/topic-list-item.uvue","common/socket.uts","pages/index/index.uvue?type=page","pages/topic-detail/topic-detail.uvue?type=page"],"sourcesContent":["<template>\n\t<list-view class=\"flex-1\" @scroll=\"handleScroll\" @scrolltolower=\"loadMore\" :scroll-top=\"scrollTop\">\r\n\t\t<!-- 导航栏 -->\r\n\t\t<sticky-header>\r\n\t\t\t<view ref=\"navbar\" class=\"navbar\">\r\n\t\t\t\t<view :style=\"'height:' + statusBarHeight + 'px;'\"></view>\r\n\t\t\t\t<view class=\"navbar-box\">\r\n\t\t\t\t\t<view class=\"navbar-icon\" @click=\"back\">\r\n\t\t\t\t\t\t<text class=\"iconfont\">{{ '\\ue60d' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text ref=\"navbarTitle\" class=\"navbar-title\">话题标题</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</sticky-header>\r\n\t\t<!-- 封面和介绍 -->\r\n\t\t<list-item ref=\"header\" :style=\"'margin-top: -'+marginTop+'px;'\" style=\"height: 590rpx;\" :type=\"1\">\r\n\t\t\t<image ref=\"banner\" class=\"banner-img\" :src=\"topic.cover\" mode=\"aspectFill\"></image>\r\n\t\t\t<view class=\"topic-title-box\">\r\n\t\t\t\t<text class=\"topic-title\">{{ topic.title }}</text>\r\n\t\t\t\t<text class=\"topic-nav\">{{ topic.category_name }}</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"topic-desc\">{{ topic.desc }}</text>\r\n\t\t\t<text class=\"topic-info\">动态：{{ topic.article_count }}条 · 今日：{{ topic.today_article_count }}条</text>\r\n\t\t\t<view class=\"divider\"></view>\r\n\t\t</list-item>\r\n\t\t<!-- tabbar -->\r\n\t\t<sticky-header>\r\n\t\t\t<view class=\"tab\">\r\n\t\t\t\t<text class=\"tab-item\" v-for=\"(item,index) in tabs\" :key=\"index\" :class=\"tabActiveId == item.id ? 'tab-item-active' : ''\" @click=\"onTabClick(item.id)\">{{ item.name }}</text>\r\n\t\t\t</view>\r\n\t\t</sticky-header>\r\n\t\t<!-- 空数据 -->\r\n\t\t<list-item style=\"height: 1200px;\" v-if=\"list.length == 0\" :type=\"2\">\r\n\t\t\t<view style=\"height: 400px;\">\r\n\t\t\t\t<loading :circle=\"true\" v-if=\"loading\"></loading>\r\n\t\t\t\t<tip title=\"暂无数据~\" v-else></tip>\r\n\t\t\t</view>\r\n\t\t</list-item>\r\n\t\t<!-- 列表 -->\r\n\t\t<list-item v-for=\"(item,index) in list\" :key=\"index\" :type=\"0\">\r\n\t\t\t<article-list-item :inTopicDetail=\"true\" :item=\"item\"></article-list-item>\r\n\t\t</list-item>\r\n\t\t<list-item :type=\"4\">\r\n\t\t\t<loading-more :loading=\"loading\" :isEnded=\"isEnded\"></loading-more>\r\n\t\t</list-item>\r\n\t</list-view>\r\n\t<add-post-btn :topic_id=\"topic.id\" :topic_title=\"topic.title\" />\n</template>\n\n<script>\r\n\timport { getToken } from \"@/store/user\"\n\timport { getURL } from \"@/common/request.uts\"\r\n\timport type { Result,ListItem,ListResult,onAddArticleSuccessEvent } from \"@/common/type.uts\"\r\n\ttype tab = {\r\n\t\ttype:string,\r\n\t\tname:string,\r\n\t\tid:string\r\n\t}\r\n\t\r\n\ttype TopicDetail = {\r\n\t\tid: number;\r\n\t\ttitle: string;\r\n\t\tcover: string;\r\n\t\tdesc: string;\r\n\t\tcreate_time: string | null;\r\n\t\tupdate_time: string | null;\r\n\t\tcategory_id: number;\r\n\t\tarticle_count: number;\r\n\t\ttoday_article_count: number;\r\n\t\tcategory_name: string | null;\r\n\t}\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\t// 状态栏高度\n\t\t\t\tstatusBarHeight:0,\r\n\t\t\t\tmarginTop:0,\r\n\t\t\t\t\r\n\t\t\t\t// 封面和介绍高度\r\n\t\t\t\t$headerHeight:0,\r\n\t\t\t\t// 导航栏dom\r\n\t\t\t\t$navbarView: null as UniElement | null,\r\n\t\t\t\t// 导航栏标题dom\r\n\t\t\t\t$navbarTitle: null as UniElement | null,\r\n\t\t\t\t\r\n\t\t\t\t// tabbar选项\r\n\t\t\t\ttabs:[{\r\n\t\t\t\t\ttype:\"hot\",\r\n\t\t\t\t\tname:\"热门\",\r\n\t\t\t\t\tid:\"hot\"\r\n\t\t\t\t},{\r\n\t\t\t\t\ttype:\"new\",\r\n\t\t\t\t\tname:\"最新\",\r\n\t\t\t\t\tid:\"new\"\r\n\t\t\t\t}] as tab[],\r\n\t\t\t\ttabActiveId:\"hot\",\r\n\t\t\t\t\r\n\t\t\t\ttopic:{\r\n\t\t\t\t\t\"id\": 0,\r\n\t\t\t\t\t\"title\": \"\",\r\n\t\t\t\t\t\"cover\": \"\",\r\n\t\t\t\t\t\"desc\": \"\",\r\n\t\t\t\t\t\"create_time\": null,\r\n\t\t\t\t\t\"update_time\": \"\",\r\n\t\t\t\t\t\"category_id\": 7,\r\n\t\t\t\t\t\"article_count\": 0,\r\n\t\t\t\t\t\"today_article_count\": 0,\r\n\t\t\t\t\t\"category_name\": \"分类\"\r\n\t\t\t\t} as TopicDetail,\r\n\t\t\t\t\r\n\t\t\t\t// 帖子列表\r\n\t\t\t\tlist:[] as ListItem[],\r\n\t\t\t\t\r\n\t\t\t\tpage:1,\r\n\t\t\t\tisEnded:false,\r\n\t\t\t\tloading:false,\r\n\t\t\t\t\r\n\t\t\t\t// 当前滚动高度\r\n\t\t\t\tcurrentScrollTop:0,\r\n\t\t\t\t// 滚动位置\r\n\t\t\t\tscrollTop:0\n\t\t\t}\n\t\t},\r\n\t\tonLoad(options:OnLoadOptions) {\r\n\t\t\tthis.statusBarHeight = uni.getSystemInfoSync().statusBarHeight\r\n\t\t\tthis.marginTop = this.statusBarHeight + 45\r\n\t\t\t\r\n\t\t\t// 获取当前话题ID\r\n\t\t\tif(options.has(\"id\")){\r\n\t\t\t\tthis.topic.id = parseInt(options.get(\"id\") as string)\r\n\t\t\t\tthis.loadTopicDetail()\r\n\t\t\t\t// 加载列表\r\n\t\t\t\tthis.loadList(null)\r\n\t\t\t}\r\n\t\t\tuni.$on(\"onAddArticleSuccess\",this.onAddArticleSuccess)\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tuni.$off(\"onAddArticleSuccess\",this.onAddArticleSuccess)\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$navbarView = this.$refs[\"navbar\"] as UniElement\r\n\t\t\tthis.$navbarTitle = this.$refs[\"navbarTitle\"] as UniElement\r\n\t\t\t\r\n\t\t\tthis.$headerHeight = (this.$refs[\"header\"] as UniElement).offsetHeight\r\n\t\t},\r\n\t\t// 触发下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.refreshData(()=>{\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '刷新成功',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t})\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t// 监听发帖成功事件，刷新对应的页面\r\n\t\t\tonAddArticleSuccess(_:onAddArticleSuccessEvent){\r\n\t\t\t\tthis.loadTopicDetail()\r\n\t\t\t\t// 加载列表\r\n\t\t\t\tthis.loadList(null)\r\n\t\t\t},\r\n\t\t\t// 刷新数据\r\n\t\t\trefreshData(loadComplete: (()=>void) | null ){\r\n\t\t\t\t// 清空数据，返回第一页\r\n\t\t\t\tthis.list.length = 0\r\n\t\t\t\tthis.page = 1\r\n\t\t\t\tthis.isEnded = false\r\n\t\t\t\tthis.loadList(loadComplete)\r\n\t\t\t},\r\n\t\t\t// 上拉加载更多\r\n\t\t\tloadMore(){\r\n\t\t\t\tif(this.loading || this.isEnded) return\r\n\t\t\t\tthis.loadList(null)\r\n\t\t\t},\r\n\t\t\t// 加载帖子列表\r\n\t\t\tloadList(loadComplete: (()=>void) | null ){\r\n\t\t\t\t// 开启上拉加载状态\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tuni.request<Result<ListResult>>({\r\n\t\t\t\t\turl: getURL(`/topic/${this.topic.id}/article/${this.page}?order=${this.tabActiveId}`),\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\ttoken:getToken()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet r = res.data\r\n\t\t\t\t\t\tif(r == null) return\r\n\t\t\t\t\t\tif(res.statusCode !=200){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: r.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst resData = r.data as ListResult | null\r\n\t\t\t\t\t\tif(resData == null) return\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 是否还有数据\r\n\t\t\t\t\t\tthis.isEnded = resData.last_page <= resData.current_page\r\n\t\t\t\t\t\tif(this.page == 1){\r\n\t\t\t\t\t\t\tthis.list = resData.data\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.list.push(...resData.data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(resData.data)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 页码+1\r\n\t\t\t\t\t\tthis.page = this.isEnded ? resData.current_page : Math.floor(resData.current_page + 1)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\t\tif(loadComplete != null){\r\n\t\t\t\t\t\t\tloadComplete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取话题详情\r\n\t\t\tloadTopicDetail(){\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tuni.request<Result<TopicDetail>>({\r\n\t\t\t\t\turl: getURL(`/topic/${this.topic.id}`),\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet r = res.data\r\n\t\t\t\t\t\tif(r == null) return\r\n\t\t\t\t\t\tif(res.statusCode !=200){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: r.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.topic = r.data as TopicDetail\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 切换tab选项\r\n\t\t\tonTabClick(id:string){\r\n\t\t\t\tif(this.tabActiveId == id){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.tabActiveId = id\r\n\t\t\t\t\r\n\t\t\t\t// 重置页码\r\n\t\t\t\tthis.page = 1\r\n\t\t\t\tthis.isEnded = false\r\n\t\t\t\tthis.list.length = 0\r\n\t\t\t\t\r\n\t\t\t\t// 确定滚动的高度\r\n\t\t\t\tlet h = this.$headerHeight\r\n\t\t\t\tif(this.currentScrollTop > h){\r\n\t\t\t\t\t// 拿到dom节点，控制css样式\r\n\t\t\t\t\tlet bannerRef = this.$refs[\"banner\"] as UniElement\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 先把图片变透明\r\n\t\t\t\t\tbannerRef.style.setProperty(\"opacity\",0)\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\t\tthis.scrollTop = this.scrollTop == h ? h+1 : h\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 倒计时200毫秒之后再显示，确保滚动完\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tbannerRef.style.setProperty(\"opacity\",1)\r\n\t\t\t\t\t\t},200)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 请求列表\r\n\t\t\t\tthis.loadList(null)\r\n\t\t\t},\r\n\t\t\tback(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t},\n\t\t\thandleScroll(e:UniScrollEvent){\r\n\t\t\t\tconst scrollTop = e.detail.scrollTop\r\n\t\t\t\tthis.currentScrollTop = scrollTop\r\n\t\t\t\t// 渐变导航栏初始透明度\r\n\t\t\t\tconst colorStart = 0.8\r\n\t\t\t\tconst colorEnd = 0\r\n\t\t\t\t\r\n\t\t\t\t// 第一个渐变色透明度变化\r\n\t\t\t\tlet colorStartChange = 1 - (1-colorStart)/this.$headerHeight * (this.$headerHeight - scrollTop)\r\n\t\t\t\tif(colorStartChange > 1){\r\n\t\t\t\t\tcolorStartChange = 1\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 第二个渐变色透明度变化\r\n\t\t\t\tlet colorEndChange = 1 - (1-colorEnd)/this.$headerHeight * (this.$headerHeight - scrollTop)\r\n\t\t\t\tif(colorEndChange > 1){\r\n\t\t\t\t\tcolorEndChange = 1\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 控制导航栏渐变色变化\r\n\t\t\t\tthis.$navbarView?.style?.setProperty(\"background-image\",`linear-gradient(to bottom,rgba(255,255,255,${colorStartChange}),rgba(255,255,255,${colorEndChange}))`)\r\n\t\t\t\t\r\n\t\t\t\t// 控制标题显示\r\n\t\t\t\t// this.$navbarTitle?.style?.setProperty(\"display\",colorEndChange == 1 ? \"flex\" : \"none\")\r\n\t\t\t\tthis.$navbarTitle?.style?.setProperty(\"opacity\",colorEndChange == 1 ? 1 : 0)\r\n\t\t\t\t\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n.navbar {\r\n\tbackground-image: linear-gradient(to bottom,rgba(255,255,255,0.8),rgba(255,255,255,0));\r\n}\r\n.navbar-box {\r\n\theight: 45px;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n}\r\n.navbar-icon {\r\n\twidth: 45px;\r\n\theight: 45px;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.navbar-title {\r\n\t/* display: none; */\r\n\topacity: 0;\r\n}\r\n.banner-img {\r\n\theight: 335rpx;\r\n\twidth: 750rpx;\r\n}\r\n.topic-title-box {\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-top: 30rpx;\r\n\tpadding: 0 35rpx;\r\n}\r\n.topic-title {\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n\tcolor: #202020;\r\n}\r\n.topic-nav {\r\n\tbackground-color: #fff1f4;\r\n\tcolor: #f96a88;\r\n\tfont-size: 14px;\r\n\tborder-radius: 5px;\r\n\tpadding: 10rpx;\r\n}\r\n.topic-desc {\r\n\tcolor: #888888;\r\n\tfont-size: 16px;\r\n\tmargin-top: 20rpx;\r\n\tpadding: 0 35rpx;\r\n}\r\n.topic-info {\r\n\tfont-size: 13px;\r\n\tcolor: #000000;\r\n\tmargin: 30rpx 0;\r\n\tpadding: 0 35rpx;\r\n}\r\n\r\n.tab {\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\talign-items: stretch;\r\n\tbackground-color: #ffffff;\r\n}\r\n.tab-item {\r\n\tcolor: #414141;\r\n\tfont-size: 17px;\r\n\tpadding: 12px 25px;\r\n}\r\n.tab-item-active {\r\n\tcolor: #f96a88;\r\n}\n</style>\n",null,null,null,null,null,null,null],"names":[],"mappings":"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"}