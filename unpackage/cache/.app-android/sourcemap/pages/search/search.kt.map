{"version":3,"sources":["pages/search/search.uvue","store/user.uts","components/article-list-item/article-list-item.uvue","pages/search/search.uvue?type=page"],"sourcesContent":["<template>\r\n\r\n\t<scroll-view style=\"flex:1\">\r\n\r\n\t\t<navbar type=\"search\" @search=\"handleSearch\"></navbar>\r\n\t\t<view class=\"cell\" v-if=\"searchList.length > 0\">\r\n\t\t\t<text class=\"cell-title\">历史记录</text>\r\n\t\t\t<text class=\"cell-tip\" @click=\"clearSearchList\">清除记录</text>\r\n\t\t</view>\r\n\t\t<view class=\"keyword-list\">\r\n\t\t\t<text class=\"keyword\" v-for=\"(item,index) in searchList\" :key=\"index\" @click=\"handleSearch(item)\">{{ item }}</text>\r\n\t\t</view>\r\n\r\n\t</scroll-view>\r\n\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsearchList:[] as string[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getSearchList()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 跳转到搜索结果页\r\n\t\t\thandleSearch(keyword:string){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/search-result/search-result?keyword='+keyword,\r\n\t\t\t\t\tsuccess:()=>{\r\n\t\t\t\t\t\tthis.addSearchList(keyword)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 加载搜索记录\r\n\t\t\tgetSearchList(){\r\n\t\t\t\t// 取出搜索历史\r\n\t\t\t\tlet list = (uni.getStorageSync(\"historySearchList\"))!\r\n\t\t\t\tif(Array.isArray(list)){\r\n\t\t\t\t\tthis.searchList = list as string[]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 添加搜索记录\r\n\t\t\taddSearchList(keyword:string){\r\n\t\t\t\t// 查询之前是否已加入\r\n\t\t\t\tlet index = (this.searchList.findIndex((v:string):boolean => v == keyword) as number)\r\n\t\t\t\tif(index != -1){\r\n\t\t\t\t\t// 如果之前加入，则直接置顶到第一位\r\n\t\t\t\t\tthis.toFirst(this.searchList,index)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 否则追加到第一位\r\n\t\t\t\t\tthis.searchList = [ keyword, ...this.searchList ]\r\n\t\t\t\t}\r\n\t\t\t\t// 存储到本地缓存中\r\n\t\t\t\tuni.setStorageSync(\"historySearchList\",this.searchList)\r\n\t\t\t},\r\n\t\t\t// 数组置顶\r\n\t\t\ttoFirst(arr:string[],index:number):string[]{\r\n\t\t\t\tif(index != 0){\r\n\t\t\t\t\tarr.unshift(arr.splice(index,1)[0])\r\n\t\t\t\t}\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\tclearSearchList(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否要清除搜索记录？',\r\n\t\t\t\t\tconfirmText: '清除',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif(res.confirm){\r\n\t\t\t\t\t\t\tuni.removeStorageSync(\"historySearchList\")\r\n\t\t\t\t\t\t\tthis.searchList.length = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n.cell {\r\n\theight: 100rpx;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tpadding: 0 30rpx;\r\n\tbackground-color: #ffffff;\r\n}\r\n.cell-title {\r\n\tcolor: #090909;\r\n}\r\n.cell-tip {\r\n\tcolor: #858585;\r\n}\r\n.keyword-list {\r\n\tflex-direction: row;\r\n\tpadding: 0 20rpx;\r\n\tflex-wrap: wrap;\r\n}\r\n.keyword {\r\n\tborder: 1rpx solid #dddddd;\r\n\tborder-radius: 4px;\r\n\tpadding: 8rpx 15rpx;\r\n\tmargin: 10rpx;\r\n}\r\n</style>\r\n",null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAK2B;;;+BAiDrB;;;;eA9BJ,sBAAS;YACR,IAAI,CAAC,aAAa;QACnB;;;;;;;;eAxBD,mBAWc,eAAA,SAXD,WAAc,eAAd,SAAA,UAAA;YAEZ,YAAsD,mBAAA,SAA9C,UAAK,UAAU,cAAQ,KAAA,YAAY;;;YAClB,IAAA,KAAA,UAAU,CAAC,MAAM,GAAA,CAAA;gBAA1C,mBAGO,QAAA,qBAHD,WAAM;oBACX,mBAAoC,QAAA,SAA9B,WAAM,eAAa;oBACzB,mBAA2D,QAAA,SAArD,WAAM,YAAY,aAAO,KAAA,eAAe,GAAE,QAAI,CAAA,EAAA;wBAAA;qBAAA;;;;;;YAErD,mBAEO,QAAA,SAFD,WAAM,iBAAc;gBACzB,mBAAmH,UAAA,IAAA,EAAA,cAAA,UAAA,CAAtE,KAAA,UAAU,EAAA,IAAzB,MAAK,OAAL,GAAI,IAAA,MAAA;2BAAlC,mBAAmH,QAAA,SAA7G,WAAM,WAA8C,SAAK,OAAQ,aAAK,KAAA;wBAAE,KAAA,YAAY,CAAC;oBAAI;uCAAM,OAAI,CAAA,EAAA;wBAAA;qBAAA;;;;;;aAWxG,qBAAiB,MAAM;;;wBAAvB,gBAAW,WAAM,MAAM;;;aAQxB,eAAA,IAAa,SAAQ,MAAM,EAAC;YAC3B,iCACC,MAAK,gDAA8C,SACnD,UAAQ,MAAI;gBACX,IAAI,CAAC,aAAa,CAAC;YACpB;;QAEF;;aAEA,gBAAA,MAAe;YAEd,IAAI,OAAQ,mBAAmB;YAC/B,IAAG,SAAM,OAAO,CAAC,OAAM;gBACtB,IAAI,CAAC,UAAS,GAAI,KAAK,EAAC,UAAE,MAAM;YACjC;QACD;;aAEA,gBAAA,IAAc,SAAQ,MAAM,EAAC;YAE5B,IAAI,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAC,GAAE,MAAM,GAAE,OAAM;uBAAK,KAAK;;cAAS,EAAC,CAAE,MAAM;YACpF,IAAG,SAAS,CAAC,CAAC,EAAC;gBAEd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAC;YAC9B,OAAO;gBAEN,IAAI,CAAC,UAAS;oBAAM;yBAAY,IAAI,CAAC,UAAS;YAC/C;YAEA,mBAAmB,qBAAoB,IAAI,CAAC,UAAU;QACvD;;aAEA,UAAA,IAAQ,cAAI,MAAM,CAAE,EAAC,OAAM,MAAM,YAAE,MAAM,EAAE;YAC1C,IAAG,SAAS,CAAC,EAAC;gBACb,IAAI,OAAO,CAAC,IAAI,MAAM,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC;YACA,OAAO;QACR;;aACA,kBAAA,MAAiB;YAChB,+BACC,QAAO,MACP,UAAS,cACT,cAAa,MACb,UAAS,IAAA,IAAO;gBACf,IAAG,IAAI,OAAO,EAAC;oBACd,sBAAsB;oBACtB,IAAI,CAAC,UAAU,CAAC,MAAK,GAAI,CAAA;gBAC1B;YACD;;QAEF;;;sBAjDA,eAAa,SAAQ,MAAM;sBAS3B;sBAQA,gBAAc,SAAQ,MAAM;sBAc5B,UAAQ,cAAI,MAAM,GAAG,OAAM,MAAM,cAAE,MAAM;sBAMzC"}